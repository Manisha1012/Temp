{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\opt.admin\\\\Documents\\\\pern-todo\\\\client\\\\src\\\\components\\\\Blog.js\",\n    _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport { w3cwebsocket as W3CWebSocket } from 'websocket';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst client = new W3CWebSocket('ws://localhost:5000');\n\nfunction Blog() {\n  _s();\n\n  const [blog, setBlog] = useState({\n    title: \"\",\n    content: \"\",\n    user_id: \"5\"\n  });\n  let name, value;\n\n  const handleInput = e => {\n    name = e.target.name;\n    value = e.target.value;\n    setBlog({ ...blog,\n      [name]: value\n    });\n  };\n\n  const ListItems = Object.keys(blog).map(function (obj, i) {\n    console.log(obj, i);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Title: \", blog[obj].title, \" ; Content: \", blog[obj].content]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 13\n    }, this);\n  });\n\n  const onButtonClicked = async e => {\n    //send messsage from client to server\n    client.send(JSON.stringify(blog));\n    e.preventDefault();\n    const {\n      content,\n      title,\n      user_id\n    } = blog;\n    const res = await fetch('/blog', {\n      method: \"POST\",\n      headers: {\n        'Content-Type': \"application/json\"\n      },\n      body: JSON.stringify({\n        content,\n        title,\n        user_id,\n        created_at: '2022-08-28 21:03:23'\n      })\n    });\n    const data = await res.json();\n\n    if (res.status === 422 || !data) {\n      window.alert(data.error);\n    } else {\n      console.log('success');\n    }\n  }; //client connection confirmation\n\n\n  client.onopen = () => {\n    console.log('WebSocket Client Connected.');\n  }; //got message from server\n\n\n  client.onmessage = message => {\n    const dataFromServer = JSON.parse(message.data);\n    console.log('Got Reply! ', dataFromServer);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      method: \"POST\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Title: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"title\",\n        value: blog.title,\n        onChange: handleInput\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 31\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 106\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Content: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        name: \"content\",\n        value: blog.content,\n        onChange: handleInput\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 33\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 113\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"hidden\",\n        name: \"user_id\",\n        value: blog.user_id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onButtonClicked,\n        children: \"Post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Posts\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 5\n    }, this), ListItems]\n  }, void 0, true);\n}\n\n_s(Blog, \"h+XGeqcpUqlFsyj9NqayGe5MXkU=\");\n\n_c = Blog;\nexport default Blog;\n\nvar _c;\n\n$RefreshReg$(_c, \"Blog\");","map":{"version":3,"names":["useState","w3cwebsocket","W3CWebSocket","client","Blog","blog","setBlog","title","content","user_id","name","value","handleInput","e","target","ListItems","Object","keys","map","obj","i","console","log","onButtonClicked","send","JSON","stringify","preventDefault","res","fetch","method","headers","body","created_at","data","json","status","window","alert","error","onopen","onmessage","message","dataFromServer","parse"],"sources":["C:/Users/opt.admin/Documents/pern-todo/client/src/components/Blog.js"],"sourcesContent":["import { useState } from 'react';\r\nimport { w3cwebsocket as W3CWebSocket } from 'websocket';\r\n\r\nconst client = new W3CWebSocket('ws://localhost:5000');\r\n\r\nfunction Blog() {\r\n\r\n    const [blog, setBlog] = useState({\r\n        title:\"\", content:\"\", user_id:\"5\"\r\n    });\r\n\r\n    let name, value;\r\n    const handleInput = (e) => {\r\n        name =  e.target.name;\r\n        value = e.target.value;\r\n\r\n        setBlog({...blog, [name]:value});\r\n    }\r\n    \r\n    const ListItems = Object.keys(blog).map(function(obj, i){\r\n        console.log(obj, i)\r\n        return (\r\n            <div>\r\n                Title: {blog[obj].title} ;\r\n                Content: {blog[obj].content}\r\n            </div>\r\n        )\r\n    });\r\n\r\n    const onButtonClicked = async (e)=> {\r\n        //send messsage from client to server\r\n        client.send(JSON.stringify(blog));\r\n\r\n        e.preventDefault();\r\n        \r\n        const {content, title, user_id} = blog;\r\n\r\n        const res = await fetch('/blog', {\r\n            method: \"POST\",\r\n            headers: {\r\n                'Content-Type': \"application/json\"\r\n            },\r\n            body: JSON.stringify({\r\n                content, title, user_id, created_at: '2022-08-28 21:03:23'\r\n            })\r\n        });\r\n\r\n        const data = await res.json();\r\n\r\n        if(res.status === 422 || !data){\r\n            window.alert(data.error);\r\n        } else {\r\n            console.log('success');\r\n        }\r\n    };\r\n\r\n    //client connection confirmation\r\n    client.onopen = () => {\r\n        console.log('WebSocket Client Connected.');\r\n    };\r\n\r\n    //got message from server\r\n    client.onmessage = (message) => {\r\n        const dataFromServer = JSON.parse(message.data);\r\n        console.log('Got Reply! ', dataFromServer);\r\n    };\r\n\r\n    return (<>\r\n    <form method=\"POST\">\r\n        <label>Title: </label><input type=\"text\" name=\"title\" value={blog.title} onChange={handleInput}/><br/>\r\n        <label>Content: </label><textarea name=\"content\" value={blog.content} onChange={handleInput}></textarea><br/>\r\n        <input type=\"hidden\" name=\"user_id\" value={blog.user_id}/>\r\n        <button onClick={onButtonClicked}>Post</button>\r\n        </form>\r\n\r\n\r\n    <h3>Posts</h3>\r\n    {ListItems}\r\n\r\n    </>);\r\n}\r\n\r\nexport default Blog;\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}